<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>File: README [Rails Rcov Plugin Documentation]</title>

	<link type="text/css" media="screen" href="../../../rdoc.css" rel="stylesheet" />

	<script src="../../../js/jquery.js" type="text/javascript" 
		charset="utf-8"></script>
	<script src="../../../js/thickbox-compressed.js" type="text/javascript" 
		charset="utf-8"></script>
	<script src="../../../js/quicksearch.js" type="text/javascript" 
		charset="utf-8"></script>
	<script src="../../../js/darkfish.js" type="text/javascript" 
		charset="utf-8"></script>
</head>
	
<body class="file">
  <div id="metadata">
		<div id="project-metadata">
			
			
			<div id="fileindex-section" class="section project-section">
				<h3 class="section-header">Files</h3>
				<ul>
				
					<li class="file"><a href="../../../README.html">README</a></li>
				
				</ul>
			</div>
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index 
					<span class="search-toggle"><img src="../../../images/find.png" 
						height="16" width="16" alt="[+]" 
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value="" 
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>
			
			
		</div>
	</div>

	<div id="documentation">
		<pre>
 = rails_rcov plugin for Rails
</pre>
<p>
rails_rcov provides easy-to-use Rake tasks to determine the code coverage
of your unit, functional, and integration tests using Mauricio
Fernandez&#8217;s rcov tool.
</p>
<h2>Installation</h2>
<p>
First, install rcov from Mauricio&#8217;s web site [<a
href="http://eigenclass.org/hiki.rb?rcov">eigenclass.org/hiki.rb?rcov</a>].
Make sure it&#8217;s on your system path, so that typing <tt>rcov</tt> on
the command line actually runs it. THIS PLUGIN DOESN&#8217;T DO ANYTHING
BESIDES GENERATE ERRORS UNLESS YOU INSTALL RCOV FIRST. RCOV CONTAINS ALL
THE MAGIC, THIS PLUGIN JUST RUNS IT.
</p>
<p>
Second, install this plugin. If your project is source-controlled by
Subversion (which it should be, really), the easiest way to install this is
via Rails&#8217; plugin script:
</p>
<pre>
  ./script/plugin install -x http://svn.codahale.com/rails_rcov
</pre>
<p>
If you&#8217;re not using Subversion, or if you don&#8217;t want it adding
<tt>svn:externals</tt> in your project, remove the <tt>-x</tt> switch:
</p>
<pre>
  ./script/plugin install http://svn.codahale.com/rails_rcov
</pre>
<h2>Usage</h2>
<p>
For each <tt>test:blah</tt> task you have for your Rails project,
rails_rcov adds two more: <tt>test:blah:rcov</tt> and
<tt>test:blah:clobber_rcov</tt>.
</p>
<p>
Running <tt>rake test:units:rcov</tt>, for example, will run your unit
tests through rcov and write the code coverage reports to
<tt>your_rails_app/coverage/units</tt>.
</p>
<p>
Running <tt>test:units:clobber_rcov</tt> will erase the generated report
for the unit tests.
</p>
<p>
Each rcov task takes two optional parameters: RCOV_PARAMS, whose argument
is passed along to rcov, and SHOW_ONLY, which limits the files displayed in
the report.
</p>
<p>
RCOV_PARAMS:
</p>
<pre>
  # sort by coverage
  rake test:units:rcov RCOV_PARAMS=&quot;--sort=coverage&quot;

  # show callsites and hide fully covered files
  rake test:units:rcov RCOV_PARAMS=&quot;--callsites --only-uncovered&quot;
</pre>
<p>
Check the rcov documentation for more details.
</p>
<p>
SHOW_ONLY is a comma-separated list of the files you&#8217;d like to see.
Right now there are four types of files rake_rcov recognizes: models,
helpers, controllers, and lib. These can be abbreviated to their first
letters:
</p>
<pre>
  # only show files from app/models
  rake test:units:rcov SHOW_ONLY=models

  # only show files from app/helpers and app/controllers
  rake test:units:rcov SHOW_ONLY=helpers,controllers

  # only show files from app/helpers and app/controllers, with less typing
  rake test:units:rcov SHOW_ONLY=h,c
</pre>
<p>
Please note that rails_rcov has only been tested with a Bash shell, and any
other environment could well explode in your face. If you&#8217;re having
trouble getting this to work on Windows, please take the time to figure out
what&#8217;s not working. Most of the time it boils down to the different
ways the Window shell and the Bash shell escape metacharacters. Play around
with the way rcov_rake escapes data (like on line 73, or 78) and send me a
fix. I don&#8217;t have a working Windows environment anymore, so leaving
it up to me won&#8217;t solve anything. ;-)
</p>
<h2>Resources</h2>
<h3>Subversion</h3>
<ul>
<li><a
href="http://svn.codahale.com/rails_rcov">svn.codahale.com/rails_rcov</a>

</li>
</ul>
<h3>Blog</h3>
<ul>
<li><a href="http://blog.codahale.com">blog.codahale.com</a>

</li>
</ul>
<h2>Credits</h2>
<p>
Written by Coda Hale <coda.hale@gmail.com>. Thanks to Nils Franzen for a
Win32 escaping patch. Thanks to Alex Wayne for suggesting how to make
SHOW_ONLY not be useless.
</p>

	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish 
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>
</body>
</html>

